% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/define_env_gradient.R
\name{define_env_gradient}
\alias{define_env_gradient}
\title{Define a potential environmental gradient or set of conditions}
\usage{
define_env_gradient(
  context = c("field", "controlled"),
  env_range = c(15, 25),
  n_groups = 5L,
  shape = c("linear", "random", "patchy"),
  target_sd = 0,
  within_group_sd = 0,
  seed = NULL
)
}
\arguments{
\item{context}{Character, either \code{"field"} or \code{"controlled"}.
This is mainly descriptive, but typically:
\itemize{
\item \code{"field"} for natural gradients (limited range, less control),
\item \code{"controlled"} for chambers/greenhouses (wider range, more control).
}}

\item{env_range}{Numeric length-2 vector \code{c(min, max)} giving
the feasible range of the environmental variable.}

\item{n_groups}{Integer. Number of potential sites/conditions along
the gradient. This does \emph{not} fix the number of individuals;
it only defines possible group mean values.}

\item{shape}{Character. Shape of the gradient of planned group means:
\itemize{
\item \code{"linear"}: evenly spaced from \code{env_range[1]} to
\code{env_range[2]}.
\item \code{"random"}: group means randomly scattered within the
range, then sorted.
\item \code{"patchy"}: group means clustered toward the extremes
of the range (approximate patchiness).
}}

\item{target_sd}{Numeric >= 0. Standard deviation of the deviation
of realised group means from planned values. Larger values mean
you cannot exactly hit the intended condition (e.g. inter-annual
variability in the field). Use small values (e.g. 0.1) for
controlled experiments.}

\item{within_group_sd}{Numeric >= 0. Expected standard deviation of
environmental values within each site/condition (micro-variation).
This is stored as metadata for later individual-level simulation.}

\item{seed}{Optional integer. If provided, used to set the random
seed for reproducibility.}
}
\value{
A data.frame with one row per potential site/condition, and
columns:
\itemize{
\item \code{group_id}: integer group index.
\item \code{context}: field or controlled.
\item \code{planned_env}: planned group mean value.
\item \code{realised_env}: realised group mean value after
adding \code{target_sd} noise and clipping to \code{env_range}.
\item \code{within_group_sd}: expected within-group SD.
}
}
\description{
This function defines a set of \emph{potential} sites (field) or
conditions (controlled experiments) along a single environmental
axis (e.g. temperature, moisture), without deciding how many
individuals will be sampled. It is meant as a first step to
describe what environmental range and structure are realistically
achievable.
}
\details{
You specify:
\itemize{
\item the feasible environmental range (e.g. 15--25 °C in the field,
10--35 °C in growth chambers),
\item the number of potential sites/conditions along that range,
\item the shape of the gradient (linear, random, patchy),
\item how precisely you can hit the targeted group means
(\code{target_sd}),
\item how much variation you expect within each group
(\code{within_group_sd}).
}

The output describes the \emph{environment space} for a single
variable that later power functions can use to decide how many
sites/conditions and replicates per group are needed.
}
\examples{
# Field gradient: 15-25 °C, 6 sites, moderate control
field_grad <- define_env_gradient(
  context         = "field",
  env_range       = c(15, 25),
  n_groups        = 6,
  shape           = "linear",
  target_sd       = 1,    # years can be off by ~1 °C
  within_group_sd = 0.5   # micro-variation within site
)
field_grad

# Controlled experiment: 10-35 °C, 8 chambers, very precise
ctrl_grad <- define_env_gradient(
  context         = "controlled",
  env_range       = c(10, 35),
  n_groups        = 8,
  shape           = "linear",
  target_sd       = 0.1,  # you can hit target ~exactly
  within_group_sd = 0.2
)
ctrl_grad

}
