% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/define_env_space.R
\name{define_env_space}
\alias{define_env_space}
\title{Define a multivariate environmental space (several variables)}
\usage{
define_env_space(
  context = c("field", "controlled"),
  variables,
  n_groups = 5L,
  seed = NULL
)
}
\arguments{
\item{context}{Character, either \code{"field"} or \code{"controlled"}.
Describes whether this is a field gradient or a controlled experiment.}

\item{variables}{Named list specifying each environmental variable.
Each element must be a list with at least a \code{range} element,
and optionally \code{shape}, \code{target_sd}, and
\code{within_group_sd}. Example:
\preformatted{
  variables <- list(
    temperature = list(
      range          = c(15, 25),
      shape          = "linear",
      target_sd      = 1,
      within_group_sd = 0.5
    ),
    moisture = list(
      range          = c(0.2, 0.6),
      shape          = "random",
      target_sd      = 0.05,
      within_group_sd = 0.1
    )
  )
  }}

\item{n_groups}{Integer. Number of potential sites/conditions along
each environmental gradient.}

\item{seed}{Optional integer. If provided, used as a base seed.
Each variable will internally use \code{seed + i} for reproducibility.}
}
\value{
A list with class \code{"env_space"} containing:
\itemize{
\item \code{context}: field or controlled.
\item \code{n_groups}: number of groups.
\item \code{variables}: character vector of variable names.
\item \code{planned}: data.frame with columns \code{group_id} and
one column per variable giving the planned group means.
\item \code{realised}: data.frame with columns \code{group_id} and
one column per variable giving realised group means.
\item \code{within_group_sd}: named numeric vector of within-group SDs
for each variable.
}

You can obtain a matrix of realised group means for use in
holobiont simulations via:
\code{as.matrix(env_space$realised[,-1])}.
}
\description{
This function defines a set of potential sites/conditions along
multiple environmental axes (e.g. temperature, moisture, pH),
without fixing the number of individuals. It calls
\code{define_env_gradient()} once for each variable and combines
the results.
}
\details{
For each environmental variable, you specify:
\itemize{
\item a feasible range (\code{range}),
\item a gradient shape (\code{shape}),
\item how precisely you can hit the target mean (\code{target_sd}),
\item expected within-group variation (\code{within_group_sd}).
}

All variables share the same number of groups (\code{n_groups}) and
context (\code{"field"} or \code{"controlled"}).
}
\examples{
# Define multivariate field environment: temperature + moisture
vars <- list(
  temperature = list(
    range          = c(15, 25),
    shape          = "linear",
    target_sd      = 1,
    within_group_sd = 0.5
  ),
  moisture = list(
    range          = c(0.2, 0.6),
    shape          = "random",
    target_sd      = 0.05,
    within_group_sd = 0.1
  )
)

env_space <- define_env_space(
  context  = "field",
  variables = vars,
  n_groups = 6,
  seed     = 123
)

env_space$planned
env_space$realised

# Use realised group means (e.g. as env for holobiont simulation)
realised_env_mat <- as.matrix(env_space$realised[,-1])

}
